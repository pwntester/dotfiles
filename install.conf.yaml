- defaults:
    link:
      relink: true

# Cleaning
- clean: ['~']
- shell:
  - rm ~/.zshrc

# Links
- create:
    - ~/.config
- link:
    ~/.config/nvim: config/nvim
    ~/.ideavimrc: home/ideavimrc
    ~/.tmux.conf: home/tmux.conf
    ~/.zshrc: home/zshrc
    ~/.zshenv: home/zshenv
    ~/.zsh: home/zsh
    ~/bin: home/bin

# ZSH
- shell:
  - [sudo chsh -s `which zsh`, Making zsh the default shell]

# Install NeoVim
- shell:
  -
    command: sudo apt-get install -y fuse libfuse2
    stdout: true
    stderr: true
    description: Install FUSE which is required to run AppImages
    quiet: false
  -
    command: curl -L -o $HOME/bin/nvim https://github.com/neovim/neovim/releases/download/nightly/nvim.appimage
    stdout: true
    stderr: true
    description: Download nvim appimage
    quiet: false
  -
    command: chmod a+x $HOME/bin/nvim
    stdout: true
    description: Make nvim executable 
    quiet: false
  -
    command: nvim --headless +"sleep 5" +"autocmd User PackerComplete quitall" +"silent PackerSync"
    stdout: true
    stderr: true
    description: Packer
    quiet: false
  -
    command: nvim --headless +"sleep 5" +"silent TSInstall python ql" +"sleep 60" +qa
    stdout: true
    stderr: true
    description: TreeSitter parsers 
    quiet: false
